#!/bin/bash

[ -f "$(which tgpt)" ] || exit 1
[ -f "$(which whisper)" ] || exit 1
[ -f "$(which whiptail)" ] || exit 1

TERM=ansi

rm -f /tmp/vocalize.*

audio_file="/tmp/vocalize.wav"
if [ -f "$audio_file" ]; then
	menu_choices=("Gravar" "Excluir Áudio" "Ouvir" "Salvar" "Transcrever")
else
	menu_choices=("Gravar")
fi

menu_options=()
for choice in "${menu_choices[@]}"; do
	menu_options+=("$choice" "")
done

chosen_option=$(whiptail --title "Vocalize" --menu "Escolha uma opção:" 15 40 8 "${menu_options[@]}" 3>&1 1>&2 2>&3)

case $chosen_option in
"Gravar")
	echo "Iniciando gravação..."
	;;
"Excluir Áudio")
	echo "Excluindo o áudio..."
	;;
"Ouvir")
	echo "Reproduzindo o áudio..."
	;;
"Salvar")
	echo "Salvando o áudio..."
	;;
"Transcrever")
	echo "Transcrevendo o áudio..."
	;;
*)
	echo "Operação cancelada"
	;;
esac
